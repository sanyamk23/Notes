{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotePage=_ref=>{let{match,history}=_ref;let noteId=match.params.id;let[note,setNote]=useState(null);useEffect(()=>{getNote();},[noteId]);let getNote=async()=>{if(noteId==='new')return;let response=await fetch(\"/api/notes/\".concat(noteId,\"/\"));let data=await response.json();setNote(data);};let createNote=async()=>{fetch(\"/api/notes/\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});};let updateNote=async()=>{fetch(\"/api/notes/\".concat(noteId,\"/\"),{method:\"PUT\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});};let deleteNote=async()=>{fetch(\"/api/notes/\".concat(noteId,\"/\"),{method:'DELETE','headers':{'Content-Type':'application/json'}});history.push('/');};let handleSubmit=()=>{console.log('NOTE:',note);if(noteId!=='new'&&note.body==''){deleteNote();}else if(noteId!=='new'){updateNote();}else if(noteId==='new'&&note.body!==null){createNote();}history.push('/');};let handleChange=value=>{setNote(note=>({...note,'body':value}));console.log('Handle Change:',note);};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:e=>{handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","ReactComponent","ArrowLeft","Link","jsx","_jsx","jsxs","_jsxs","NotePage","_ref","match","history","noteId","params","id","note","setNote","getNote","response","fetch","concat","data","json","createNote","method","headers","body","JSON","stringify","updateNote","deleteNote","push","handleSubmit","console","log","handleChange","value","className","children","onClick","onChange","e","target"],"sources":["C:/Brudite_old/Notes/DR-Notes/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\nimport { Link } from 'react-router-dom'\n\nconst NotePage = ({ match, history }) => {\n\n    let noteId = match.params.id\n    let [note, setNote] = useState(null)\n\n    useEffect(() => {\n        getNote()\n    }, [noteId])\n\n\n    let getNote = async () => {\n        if (noteId === 'new') return\n\n        let response = await fetch(`/api/notes/${noteId}/`)\n        let data = await response.json()\n        setNote(data)\n    }\n\n    let createNote = async () => {\n        fetch(`/api/notes/`, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(note)\n        })\n    }\n\n\n    let updateNote = async () => {\n        fetch(`/api/notes/${noteId}/`, {\n            method: \"PUT\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(note)\n        })\n    }\n\n\n    let deleteNote = async () => {\n        fetch(`/api/notes/${noteId}/`, {\n            method: 'DELETE',\n            'headers': {\n                'Content-Type': 'application/json'\n            }\n        })\n        history.push('/')\n    }\n\n    let handleSubmit = () => {\n        console.log('NOTE:', note)\n        if (noteId !== 'new' && note.body == '') {\n            deleteNote()\n        } else if (noteId !== 'new') {\n            updateNote()\n        } else if (noteId === 'new' && note.body !== null) {\n            createNote()\n        }\n        history.push('/')\n    }\n\n    let handleChange = (value) => {\n        setNote(note => ({ ...note, 'body': value }))\n        console.log('Handle Change:', note)\n    }\n\n    return (\n        <div className=\"note\" >\n            <div className=\"note-header\">\n                <h3>\n                    <ArrowLeft onClick={handleSubmit} />\n                </h3>\n                {noteId !== 'new' ? (\n                    <button onClick={deleteNote}>Delete</button>\n                ) : (\n                    <button onClick={handleSubmit}>Done</button>\n                )}\n\n            </div>\n            <textarea onChange={(e) => { handleChange(e.target.value) }} value={note?.body}></textarea>\n        </div>\n    )\n}\n\nexport default NotePage\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}